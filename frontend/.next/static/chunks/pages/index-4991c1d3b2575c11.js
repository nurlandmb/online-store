(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4369)}])},8652:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(5893);function s(t){return(0,r.jsx)("div",{className:t.fixed?"loader-wrapper fixed ".concat(t.addClass):"loader-wrapper ".concat(t.addClass),children:(0,r.jsxs)("div",{className:"loader",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})})}n(7294)},4667:function(t,e,n){"use strict";var r=n(1799),s=n(9396),c=n(828),o=n(5893),i=n(7294),u=n(6064),a=n(2566);e.Z=(0,u.$j)(function(t){return{cart:t.cart}},function(t){return{cartHandler:function(e,n,r,s){return t((0,a.nJ)(e,n,r,s))}}})(function(t){var e=(0,c.Z)((0,i.useState)(t.product),2),n=e[0],u=e[1],a=n.name,d=n.description,l=n.image,p=n.category,f=n.price,h=n.priceWithDiscount,_=n._id,m=n.quantity,x=n.shortInfo;return(0,i.useEffect)(function(){var e=t.cart.cartItems.find(function(t){return t._id==_}),n=t.cart.cartItems.indexOf(e);-1!==n?u(t.cart.cartItems[n]):u((0,s.Z)((0,r.Z)({},t.product),{quantity:0}))},[t.cart.cartItems]),(0,o.jsxs)("div",{className:"product "+t.addClass,children:[(0,o.jsx)("div",{className:"product__img",children:(0,o.jsx)("img",{src:l,alt:a})}),(0,o.jsxs)("div",{className:"product__content",children:[(0,o.jsxs)("div",{className:"product__content-top",children:[(0,o.jsx)("h3",{className:"product__content-top__title",children:a}),(0,o.jsx)("p",{className:"product__content-top__info",children:x||p})]}),(0,o.jsx)("p",{className:"product__content-descr",children:d}),(0,o.jsxs)("div",{className:"product__content-bottom",children:[(0,o.jsxs)("p",{className:"product__content-bottom__price",children:[h?(0,o.jsxs)(o.Fragment,{children:[h,"₸ ",(0,o.jsxs)("span",{children:[f,"₸"]})]}):f+"₸"," "]}),m&&m>=1?(0,o.jsxs)("div",{className:"product__content-bottom__cart",children:[(0,o.jsx)("button",{className:"product__content-bottom__cart-button",onClick:function(){return t.cartHandler(n,"minus",t.cart.cartItems,t.cart.couponDiscount)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})}),(0,o.jsx)("span",{className:"product__content-bottom__cart-quantity",children:m}),(0,o.jsx)("button",{className:"product__content-bottom__cart-button plus",onClick:function(){return t.cartHandler(n,"plus",t.cart.cartItems,t.cart.couponDiscount)},children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}):(0,o.jsxs)("button",{className:"product__content-bottom__button",onClick:function(){return t.cartHandler(t.product,"add",t.cart.cartItems,t.cart.couponDiscount)},children:["В корзину",(0,o.jsx)("span",{children:(0,o.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.42226 19.8203C7.84426 19.8203 8.18726 20.1633 8.18726 20.5853C8.18726 21.0073 7.84426 21.3493 7.42226 21.3493C7.00026 21.3493 6.65826 21.0073 6.65826 20.5853C6.65826 20.1633 7.00026 19.8203 7.42226 19.8203Z",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M18.6747 19.8203C19.0967 19.8203 19.4397 20.1633 19.4397 20.5853C19.4397 21.0073 19.0967 21.3493 18.6747 21.3493C18.2527 21.3493 17.9097 21.0073 17.9097 20.5853C17.9097 20.1633 18.2527 19.8203 18.6747 19.8203Z",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M2.74988 3.25L4.82988 3.61L5.79288 15.083C5.87088 16.018 6.65188 16.736 7.58988 16.736H18.5019C19.3979 16.736 20.1579 16.078 20.2869 15.19L21.2359 8.632C21.3529 7.823 20.7259 7.099 19.9089 7.099H5.16388",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M14.1254 10.795H16.8984",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]})]})]})})},4369:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSG:function(){return d}});var r=n(828),s=n(5893);n(3889);var c=n(7294),o=n(4667),i=n(1889),u=n(6064),a=n(8652),d=!0;e.default=(0,u.$j)(function(t){return{products:t.products}},function(t){return{loadProducts:function(){return t((0,i.QD)())},loadCategories:function(){return t((0,i.Uy)())},productsFetchSuccess:function(e){return t((0,i.xq)(e))},categoriesFetchSuccess:function(e){return t((0,i.Pc)(e))}}})(function(t){var e=function(){window.pageYOffset>u?f(!0):f(!1)},n=(0,c.useRef)(null),i=(0,r.Z)((0,c.useState)(""),2),u=i[0],d=i[1],l=(0,r.Z)((0,c.useState)(!1),2),p=l[0],f=l[1];(0,c.useEffect)(function(){t.productsFetchSuccess(t.serverProducts),t.categoriesFetchSuccess(t.serverCategories),d(n.current.offsetTop)},[]),(0,c.useEffect)(function(){return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}});var h=function(e){return t.products.products.filter(function(t){return t.category===e&&t.isVisible}).length},_=function(t){var e=document.querySelector("#".concat(t));window.scrollTo(0,e.offsetTop)};return t.products.isLoading?(0,s.jsx)(a.Z,{addClass:"dark",fixed:!0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("section",{className:"banner"}),(0,s.jsx)("section",{className:p?"fixed categories":"categories",ref:n,children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("nav",{className:"categories__list",children:t.serverCategories.filter(function(t){return h(t)>0}).map(function(t,e){return(0,s.jsx)("button",{className:"categories__list-item",onClick:function(){return _(t)},children:t},e)})})})}),t.serverCategories.filter(function(t){return h(t)>0}).map(function(e,n){return!!h(e)>0&&(0,s.jsx)("section",{className:0===n?"first products":"products",id:e,children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h2",{className:"products__title section-title",children:e}),(0,s.jsx)("ul",{className:"products__list",children:t.serverProducts.filter(function(t){return t.category===e&&t.isVisible}).map(function(t){return(0,s.jsx)(o.Z,{addClass:"products__list-item",product:t},t._id)})})]})},e)})]})})},1889:function(t,e,n){"use strict";n.d(e,{Pc:function(){return f},Uy:function(){return l},QD:function(){return d},xq:function(){return m}});var r=n(7568),s=n(655),c=n(9669),o=n.n(c),i=n(2031),u=n(2920),a=function(t){return t.response&&(t.response.data.message||t.message)};o().defaults.baseURL="http://localhost:5000";var d=function(){var t;return t=(0,r.Z)(function(t){var e;return(0,s.__generator)(this,function(n){switch(n.label){case 0:t(_()),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o().get("/api/product")];case 2:return t(m(n.sent().data)),[3,4];case 3:return e=n.sent(),u.Am.error(a(e)),t(x(e)),console.log(e),[3,4];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}},l=function(){var t;return t=(0,r.Z)(function(t){var e;return(0,s.__generator)(this,function(n){switch(n.label){case 0:t(p()),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o().get("/api/product/categories")];case 2:return t(f(n.sent().data)),[3,4];case 3:return e=n.sent(),u.Am.error(a(e)),t(h(e)),[3,4];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}},p=function(){return{type:i.h0}},f=function(t){return{type:i.Be,payload:t}},h=function(t){return{type:i._7,payload:t}},_=function(){return{type:i.vb}},m=function(t){return{type:i.x3,payload:t}},x=function(t){return{type:i.SM,payload:t}}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=5557)}),_N_E=t.O()}]);